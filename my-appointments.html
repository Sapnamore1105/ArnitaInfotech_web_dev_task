<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Appointments</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
  <h2 class="logo">MedCare Plus</h2>
  <nav>
    <a href="index.html">Home</a>
    <a href="appointment.html">Book Appointment</a>
  </nav>
</header>

<section class="appointments">
  <h2>My Appointment</h2>

  <div id="appointmentBox"></div>
</section>

<script>
const appointments =
  JSON.parse(localStorage.getItem("appointments")) || [];

const box = document.getElementById("appointmentBox");

if (appointments.length === 0) {
  box.innerHTML = "<p>No appointments found.</p>";
} else {
  box.innerHTML = appointments
    .map((a, index) => {
      let cancelBtn = "";

      // Allow cancel for Pending AND Rejected
      if (a.status !== "Confirmed") {
        cancelBtn = `
          <button class="btn-outline"
            onclick="cancelAppointment(${index})">
            Remove Appointment
          </button>
        `;
      }

      return `
        <div class="appointment-card user">
          <p><strong>Name:</strong> ${a.name}</p>
          <p><strong>Doctor:</strong> ${a.doctor}</p>
          <p><strong>Date:</strong> ${a.date}</p>
          <p><strong>Time:</strong> ${a.time}</p>
          <p><strong>Status:</strong> ${a.status}</p>

          ${cancelBtn}
        </div>
      `;
    })
    .join("");
}

function cancelAppointment(index) {
  if (!confirm("Are you sure you want to remove this appointment?")) return;

  appointments.splice(index, 1);
  localStorage.setItem("appointments", JSON.stringify(appointments));
  location.reload();
}

</script>



</body>
</html>
